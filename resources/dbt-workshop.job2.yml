resources:
  jobs:
    dbt-workshop_jo2b:
      name: dbt-workshop_job2

      schedule:
        quartz_cron_expression: 39 0 0 * * ?
        timezone_id: Europe/Amsterdam
        pause_status: UNPAUSED

      #email_notifications:
      #  on_failure:
      #    - your_email@example.com

      tasks:
        - task_key: dbt

          dbt_task:
            project_directory: .
            # The default schema, catalog, etc. are defined in ../dbt_profiles/profiles.yml
            profiles_directory: dbt_profiles/
            commands:
            # The dbt commands to run (see also the dev/prod profiles in dbt_profiles/profiles.yml)
            - 'dbt deps --target=${bundle.target}'
            - 'dbt seed --target=${bundle.target}'
            - 'dbt build --target=${bundle.target}'
          environment_key: dbt-default
      queue:
        enabled: true
      environments:
        - environment_key: dbt-default
          spec:
            client: "2"
            dependencies:
              - dbt-databricks>=1.0.0,<2.0.0
      performance_target: STANDARD
